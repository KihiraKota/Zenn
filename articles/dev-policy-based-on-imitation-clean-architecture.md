---
title: "「なんちゃってクリーンアーキテクチャ」を基にしたLaravelでの開発方針"
emoji: "🦝"
type: "tech" # tech: 技術記事 / idea: アイデア
topics: [laravel]
published: false
---
API を開発する際の Laravel の構成は、「なんちゃってクリーンアーキテクチャ」を基にしているのですが、いくつかのプロジェクトを経験する中で、アレンジしたり、ルールがあったほうが良いことがあったので、開発方針としてまとめています。

## 「なんちゃってクリーンアーキテクチャ」について

[mpyw](https://zenn.dev/mpyw) 氏が [5年間 Laravel を使って辿り着いた，全然頑張らない「なんちゃってクリーンアーキテクチャ」という落としどころ](https://zenn.dev/mpyw/articles/ce7d09eb6d8117) の記事で書かれている Laravel の構成のことです。

https://zenn.dev/mpyw/articles/ce7d09eb6d8117

詳しくは上記の記事を参照ください。

## １つの API に対して、リクエスト、ユースケース、リソースは１つずつ作成する

API を１つ追加するだけで一気にファイルが３つも必要になるのか(テストのファイルなども含めればもっと)、と思うかもしれませんが、他の API への影響を気にせずに修正することがいつでもできるようにしておいた方がメンテナンスがしやすいです。
ただ、内容がまったく同じクラスが複数ある、ということになってしまう場合もあるので、その場合は以下のような方法で共通化してください。

### リクエスト

- 共通する処理を別のクラスにまとめる
- 内容がまったく同じクラスを空継承する ※

### ユースケース

- 後述する「海中レベルのユースケース」を作成する

### リソース

- 共通する処理を別のクラスにまとめる
- 内容がまったく同じクラスを空継承する ※

※以下のサンプルのように、あるクラスを継承するが一切の変更を加えないことを便宜的に「空(から)継承」と表現しています。

```php
class A
{
    public $a;

    public function hello()
    {
        return 'hi!';
    }
}

class B extends A
{
}
```
